{% extends "./gameLoader.njk" %}

{% block content %}
    <script src="/public/libs/ruffle.js"></script>
    <script>
        window.RufflePlayer = window.RufflePlayer || {};
        window.addEventListener("load", (event) => {
            const ruffle = window
                .RufflePlayer
                .newest();
            const player = ruffle.createPlayer();
            const container = document.getElementById("container");
            container.appendChild(player);
            const sourceLink = document
                .getElementById("sourceLink")
                .getAttribute("href");
            player.load(sourceLink);
        });
    </script>
    <div id="container" class="game--window--container"></div>
    <a id="sourceLink" href="/public/library/flash/{{gamePath}}">Game File</a>
    {{ content | safe }}
{% endblock %}